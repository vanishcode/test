(self.webpackChunkdemo=self.webpackChunkdemo||[]).push([[5934],{11249:(e,t,r)=>{"use strict";var n=r(48834).Buffer,i=new(0,r(87554).ec)("secp256k1"),o=r.g.crypto||r.g.msCrypto||{},a=o.subtle||o.webkitSubtle,s=r(5634);const l=n.from("fffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141","hex"),c=n.alloc(32,0);function u(e,t){if(!e)throw new Error(t||"Assertion failed")}function d(e){return t=e,!(!n.isBuffer(t)||32!==t.length)&&e.compare(c)>0&&e.compare(l)<0;var t}function f(e){var t=new Uint8Array(e);return void 0===o.getRandomValues?n.from(s.randomBytes(e)):(o.getRandomValues(t),n.from(t))}function h(e){return new Promise((function(t){var r=s.createHash("sha512").update(e).digest();t(new Uint8Array(r))}))}function p(e){return function(t,r,i){return new Promise((function(o){if(a)return a.importKey("raw",r,{name:"AES-CBC"},!1,[e]).then((function(r){var n={name:"AES-CBC",iv:t};return a[e](n,r,i)})).then((function(e){o(n.from(new Uint8Array(e)))}));if("encrypt"===e){var l=s.createCipheriv("aes-256-cbc",r,t);let e=l.update(i),a=l.final();o(n.concat([e,a]))}else if("decrypt"===e){var c=s.createDecipheriv("aes-256-cbc",r,t);let e=c.update(i),a=c.final();o(n.concat([e,a]))}}))}}var g=p("encrypt"),w=p("decrypt"),b=t.rc=function(e){return u(32===e.length,"Bad private key"),u(d(e),"Bad private key"),n.from(i.keyFromPrivate(e).getPublic("arr"))};t.Xx=function(e,t){return new Promise((function(r){u(32===e.length,"Bad private key"),u(d(e),"Bad private key"),u(t.length>0,"Message should not be empty"),u(t.length<=32,"Message is too long"),r(n.from(i.sign(t,e,{canonical:!0}).toDER()))}))};var y=function(e,t){return new Promise((function(r){u(n.isBuffer(e),"Bad private key"),u(n.isBuffer(t),"Bad public key"),u(32===e.length,"Bad private key"),u(d(e),"Bad private key"),u(65===t.length||33===t.length,"Bad public key"),65===t.length&&u(4===t[0],"Bad public key"),33===t.length&&u(2===t[0]||3===t[0],"Bad public key");var o=i.keyFromPrivate(e),a=i.keyFromPublic(t),s=o.derive(a.getPublic());r(n.from(s.toArray()))}))},m=function(e,t){return new Promise((function(r){u(n.isBuffer(e),"Bad private key"),u(n.isBuffer(t),"Bad public key"),u(32===e.length,"Bad private key"),u(d(e),"Bad private key"),u(65===t.length||33===t.length,"Bad public key"),65===t.length&&u(4===t[0],"Bad public key"),33===t.length&&u(2===t[0]||3===t[0],"Bad public key");var o=i.keyFromPrivate(e),a=i.keyFromPublic(t),s=o.derive(a.getPublic());r(n.from(s.toString(16,64),"hex"))}))};t.HI=function(e,t,r){var i,o,a,l;return r=r||{},new Promise((function(t){for(var n=r.ephemPrivateKey||f(32);!d(n);)n=r.ephemPrivateKey||f(32);o=b(n),t(m(n,e))})).then((function(e){return h(e)})).then((function(e){i=r.iv||f(16);var n=e.slice(0,32);return l=e.slice(32),g(i,n,t)})).then((function(e){a=e;var t=n.concat([i,o,a]);return function(e,t){return new Promise((function(r){var i=s.createHmac("sha256",n.from(e));i.update(t),r(i.digest())}))}(l,t)})).then((function(e){return{iv:i,ephemPublicKey:o,ciphertext:a,mac:e}}))};const v=function(e,t,r=!1){var i;return(r?m:y)(e,t.ephemPublicKey).then((function(e){return h(e)})).then((function(e){i=e.slice(0,32);var r,o,a,l=e.slice(32),c=n.concat([t.iv,t.ephemPublicKey,t.ciphertext]);return r=l,o=c,a=t.mac,new Promise((function(e){var t=s.createHmac("sha256",n.from(r));t.update(o),e(function(e,t){if(e.length!==t.length)return!1;for(var r=0,n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}(t.digest(),a))}))})).then((function(o){if(!o&&!1===r)return v(e,t,!0);if(!o&&!0===r)throw new Error("bad MAC after trying padded");return w(t.iv,i,t.ciphertext).then((function(e){return n.from(new Uint8Array(e))}))}))};t.pe=v},23460:(e,t,r)=>{"use strict";r.d(t,{U2:()=>w,ut:()=>d,v_:()=>b});var n=r(56666),i=r(51344),o=r.n(i),a=r(79640);function s(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function l(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?s(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):s(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const c=r.n(a)().getLogger("http-helpers");c.setLevel(a.levels.INFO);let u="torus-default";function d(e){u=e}async function f(e,t){let r=null;try{r=new URL(e)}catch(e){}return fetch(e,t)}function h(){const e={};return u&&(e["x-api-key"]=u),e}function p(e){c.info(`Response: ${e.status} ${e.statusText}`),c.info(`Url: ${e.url}`)}const g=(e,t)=>{const r=new Promise(((t,r)=>{const n=setTimeout((()=>{clearTimeout(n),r(new Error(`Timed out in ${e}ms`))}),e)}));return Promise.race([t,r])},w=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n={mode:"cors",headers:{}};r.useAPIKey&&(n.headers=l(l({},n.headers),h()));const i=o()(n,t,{method:"GET"}),a=await f(e,i);if(a.ok)return a.json();throw p(a),a},b=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};const i={mode:"cors",headers:{"Content-Type":"application/json; charset=utf-8"}};n.useAPIKey&&(i.headers=l(l({},i.headers),h()));const a=o()(i,r,{method:"POST"});return n.isUrlEncodedData?(a.body=t,"application/json; charset=utf-8"===a.headers["Content-Type"]&&delete a.headers["Content-Type"]):a.body=JSON.stringify(t),g(n.timeout||6e4,f(e,a).then((e=>{if(e.ok)return e.json();throw p(e),e})))}},17391:(e,t,r)=>{"use strict";r.d(t,{AP:()=>E,O4:()=>U,Pk:()=>k,Rq:()=>O,UZ:()=>j,Ue:()=>v,V2:()=>A,XR:()=>y,eI:()=>T,nE:()=>S,v0:()=>R,zc:()=>D});var n=r(56666),i=r(87416),o=r(17990),a=r(22699),s=r(77847),l=r.n(s),c=r(58094),u=r(18797),d=r.n(u),f=r(29928),h=r.n(f),p=r(3171),g=r.n(p);function w(){}const b="ACK";class y extends i.Duplex{constructor(e){let{name:t,target:r,targetWindow:i=window,targetOrigin:o="*"}=e;if(super({objectMode:!0}),(0,n.Z)(this,"_init",void 0),(0,n.Z)(this,"_haveSyn",void 0),(0,n.Z)(this,"_name",void 0),(0,n.Z)(this,"_target",void 0),(0,n.Z)(this,"_targetWindow",void 0),(0,n.Z)(this,"_targetOrigin",void 0),(0,n.Z)(this,"_onMessage",void 0),(0,n.Z)(this,"_synIntervalId",void 0),!t||!r)throw new Error("Invalid input.");this._init=!1,this._haveSyn=!1,this._name=t,this._target=r,this._targetWindow=i,this._targetOrigin=o,this._onMessage=this.onMessage.bind(this),this._synIntervalId=null,window.addEventListener("message",this._onMessage,!1),this._handShake()}_break(){this.cork(),this._write("BRK",null,w),this._haveSyn=!1,this._init=!1}_handShake(){this._write("SYN",null,w),this.cork()}_onData(e){if(this._init)if("BRK"===e)this._break();else try{this.push(e)}catch(e){this.emit("error",e)}else"SYN"===e?(this._haveSyn=!0,this._write(b,null,w)):e===b&&(this._init=!0,this._haveSyn||this._write(b,null,w),this.uncork())}_postMessage(e){const t=this._targetOrigin;this._targetWindow.postMessage({target:this._target,data:e},t)}onMessage(e){const t=e.data;"*"!==this._targetOrigin&&e.origin!==this._targetOrigin||e.source!==this._targetWindow||"object"!=typeof t||t.target!==this._name||!t.data||this._onData(t.data)}_read(){}_write(e,t,r){this._postMessage(e),r()}_destroy(){window.removeEventListener("message",this._onMessage,!1)}}function m(e,t,r){try{Reflect.apply(e,t,r)}catch(e){setTimeout((()=>{throw e}))}}class v extends a.EventEmitter{emit(e){let t="error"===e;const r=this._events;if(void 0!==r)t=t&&void 0===r.error;else if(!t)return!1;for(var n=arguments.length,i=new Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];if(t){let e;if(i.length>0&&([e]=i),e instanceof Error)throw e;const t=new Error("Unhandled error."+(e?` (${e.message})`:""));throw t.context=e,t}const a=r[e];if(void 0===a)return!1;if("function"==typeof a)m(a,this,i);else{const e=a.length,t=function(e){const t=e.length,r=new Array(t);for(let n=0;n<t;n+=1)r[n]=e[n];return r}(a);for(let r=0;r<e;r+=1)m(t[r],this,i)}return!0}}class _ extends Error{constructor(e){let{code:t,message:r,data:i}=e;if(!Number.isInteger(t))throw new Error("code must be an integer");if(!r||"string"!=typeof r)throw new Error("message must be string");super(r),(0,n.Z)(this,"code",void 0),(0,n.Z)(this,"data",void 0),this.code=t,void 0!==i&&(this.data=i)}toString(){return l()({code:this.code,message:this.message,data:this.data,stack:this.stack})}}const S=function(e,t){let r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return(n,i)=>{n||i.error?t(n||i.error):!r||Array.isArray(i)?e(i):e(i.result)}};function E(){const e={},t=new v,r=new i.Duplex({objectMode:!0,read:function(){return!1},write:function(r,n,i){let o;try{r.id?function(t){const r=e[t.id];if(!r)throw new Error(`StreamMiddleware - Unknown response id "${t.id}"`);delete e[t.id],Object.assign(r.res,t),setTimeout(r.end)}(r):function(e){t.emit("notification",e)}(r)}catch(e){o=e}i(o)}});return{events:t,middleware:(t,n,i,o)=>{r.push(t),e[t.id]={req:t,res:n,next:i,end:o}},stream:r}}function R(e){return(t,r,n,i)=>{const o=e[t.method];return void 0===o?n():"function"==typeof o?o(t,r,n,i):(r.result=o,i())}}function O(){return(e,t,r,n)=>{const i=e.id,a=(0,o.kb)();e.id=a,t.id=a,r((r=>{e.id=i,t.id=i,r()}))}}function k(e){return async(t,r,n,i)=>{let o;const a=new Promise((e=>{o=e}));let s=null,l=!1;const c=async()=>{l=!0,n((e=>{s=e,o()})),await a};try{await e(t,r,c),l?(await a,s(null)):i(null)}catch(e){s?s(e):i(e)}}}function P(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}class T extends v{constructor(){super(),(0,n.Z)(this,"_middleware",void 0),this._middleware=[]}static async _runAllMiddleware(e,t,r){const n=[];let i=null,o=!1;for(const a of r)if([i,o]=await T._runMiddleware(e,t,a,n),o)break;return[i,o,n.reverse()]}static _runMiddleware(e,t,r,n){return new Promise((i=>{const o=e=>{const r=e||t.error;r&&(t.error=(0,c.serializeError)(r)),i([r,!0])},a=e=>{t.error?o(t.error):(e&&("function"!=typeof e&&o(new _({code:-32603,message:"JRPCEngine: 'next' return handlers must be functions"})),n.push(e)),i([null,!1]))};try{r(e,t,a,o)}catch(e){o(e)}}))}static async _runReturnHandlers(e){for(const t of e)await new Promise(((e,r)=>{t((t=>t?r(t):e()))}))}static _checkForCompletion(e,t,r){if(!("result"in t)&&!("error"in t))throw new _({code:-32603,message:"Response has no error or result for request"});if(!r)throw new _({code:-32603,message:"Nothing ended request"})}push(e){this._middleware.push(e)}handle(e,t){if(t&&"function"!=typeof t)throw new Error('"callback" must be a function if provided.');return Array.isArray(e)?t?this._handleBatch(e,t):this._handleBatch(e):t?this._handle(e,t):this._promiseHandle(e)}asMiddleware(){return async(e,t,r,n)=>{try{const[i,o,a]=await T._runAllMiddleware(e,t,this._middleware);return o?(await T._runReturnHandlers(a),n(i)):r((async e=>{try{await T._runReturnHandlers(a)}catch(t){return e(t)}return e()}))}catch(e){return n(e)}}}async _handleBatch(e,t){try{const r=await Promise.all(e.map(this._promiseHandle.bind(this)));return t?t(null,r):r}catch(e){if(t)return t(e);throw e}}_promiseHandle(e){return new Promise((t=>{this._handle(e,((e,r)=>{t(r)}))}))}async _handle(e,t){if(!e||Array.isArray(e)||"object"!=typeof e){const e=new _({code:-32603,message:"request must be plain object"});return t(e,{id:void 0,jsonrpc:"2.0",error:e})}if("string"!=typeof e.method){const r=new _({code:-32603,message:"method must be string"});return t(r,{id:e.id,jsonrpc:"2.0",error:r})}const r=function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?P(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):P(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},e),i={id:r.id,jsonrpc:r.jsonrpc};let o=null;try{await this._processRequest(r,i)}catch(e){o=e}return o&&(delete i.result,i.error||(i.error=(0,c.serializeError)(o))),t(o,i)}async _processRequest(e,t){const[r,n,i]=await T._runAllMiddleware(e,t,this._middleware);if(T._checkForCompletion(e,t,n),await T._runReturnHandlers(i),r)throw r}}function j(e){const t=new T;return e.forEach((e=>t.push(e))),t.asMiddleware()}class L extends i.Duplex{constructor(e){let{parent:t,name:r}=e;super({objectMode:!0}),(0,n.Z)(this,"_parent",void 0),(0,n.Z)(this,"_name",void 0),this._parent=t,this._name=r}_read(){}_write(e,t,r){this._parent.push({name:this._name,data:e}),r()}}function I(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?I(Object(r),!0).forEach((function(t){(0,n.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):I(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}const x=Symbol("IGNORE_SUBSTREAM");class U extends i.Duplex{constructor(){super(M(M({},arguments.length>0&&void 0!==arguments[0]?arguments[0]:{}),{},{objectMode:!0})),(0,n.Z)(this,"_substreams",void 0),(0,n.Z)(this,"getStream",void 0),this._substreams={}}createStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);const t=new L({parent:this,name:e});return this._substreams[e]=t,function(e,r){const n=h()((e=>t.destroy(e||void 0)));d()(e,{readable:!1},n),d()(e,{writable:!1},n)}(this),t}ignoreStream(e){if(!e)throw new Error("ObjectMultiplex - name must not be empty");if(this._substreams[e])throw new Error(`ObjectMultiplex - Substream for name "${e}" already exists`);this._substreams[e]=x}_read(){}_write(e,t,r){const{name:n,data:i}=e;if(!n)return window.console.warn(`ObjectMultiplex - malformed chunk without name "${e}"`),r();const o=this._substreams[n];return o?(o!==x&&o.push(i),r()):(window.console.warn(`ObjectMultiplex - orphaned data for stream "${n}"`),r())}}function A(e){const t=new U;return t.getStream=function(e){return this._substreams[e]?this._substreams[e]:this.createStream(e)},g()(e,t,e,(e=>{e&&window.console.error(e)})),t}class D extends y{_postMessage(e){let t=this._targetOrigin;if("object"==typeof e){const r=e;if("object"==typeof r.data){const e=r.data;if(Array.isArray(e.params)&&e.params.length>0){const r=e.params[0];r._origin&&(t=r._origin),r._origin=window.location.origin}}}this._targetWindow.postMessage({target:this._target,data:e},t)}}},20485:e=>{"use strict";var t={};function r(e,r,n){n||(n=Error);var i=function(e){var t,n;function i(t,n,i){return e.call(this,function(e,t,n){return"string"==typeof r?r:r(e,t,n)}(t,n,i))||this}return n=e,(t=i).prototype=Object.create(n.prototype),t.prototype.constructor=t,t.__proto__=n,i}(n);i.prototype.name=n.name,i.prototype.code=e,t[e]=i}function n(e,t){if(Array.isArray(e)){var r=e.length;return e=e.map((function(e){return String(e)})),r>2?"one of ".concat(t," ").concat(e.slice(0,r-1).join(", "),", or ")+e[r-1]:2===r?"one of ".concat(t," ").concat(e[0]," or ").concat(e[1]):"of ".concat(t," ").concat(e[0])}return"of ".concat(t," ").concat(String(e))}r("ERR_INVALID_OPT_VALUE",(function(e,t){return'The value "'+t+'" is invalid for option "'+e+'"'}),TypeError),r("ERR_INVALID_ARG_TYPE",(function(e,t,r){var i,o,a,s,l;if("string"==typeof t&&(o="not ",t.substr(0,o.length)===o)?(i="must not be",t=t.replace(/^not /,"")):i="must be",function(e,t,r){return(void 0===r||r>e.length)&&(r=e.length),e.substring(r-t.length,r)===t}(e," argument"))a="The ".concat(e," ").concat(i," ").concat(n(t,"type"));else{var c=("number"!=typeof l&&(l=0),l+".".length>(s=e).length||-1===s.indexOf(".",l)?"argument":"property");a='The "'.concat(e,'" ').concat(c," ").concat(i," ").concat(n(t,"type"))}return a+". Received type ".concat(typeof r)}),TypeError),r("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),r("ERR_METHOD_NOT_IMPLEMENTED",(function(e){return"The "+e+" method is not implemented"})),r("ERR_STREAM_PREMATURE_CLOSE","Premature close"),r("ERR_STREAM_DESTROYED",(function(e){return"Cannot call "+e+" after a stream was destroyed"})),r("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),r("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),r("ERR_STREAM_WRITE_AFTER_END","write after end"),r("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),r("ERR_UNKNOWN_ENCODING",(function(e){return"Unknown encoding: "+e}),TypeError),r("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),e.exports.q=t},32034:(e,t,r)=>{"use strict";var n=r(34406),i=Object.keys||function(e){var t=[];for(var r in e)t.push(r);return t};e.exports=u;var o=r(79311),a=r(75911);r(91285)(u,o);for(var s=i(a.prototype),l=0;l<s.length;l++){var c=s[l];u.prototype[c]||(u.prototype[c]=a.prototype[c])}function u(e){if(!(this instanceof u))return new u(e);o.call(this,e),a.call(this,e),this.allowHalfOpen=!0,e&&(!1===e.readable&&(this.readable=!1),!1===e.writable&&(this.writable=!1),!1===e.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",d)))}function d(){this._writableState.ended||n.nextTick(f,this)}function f(e){e.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(e){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=e,this._writableState.destroyed=e)}})},57861:(e,t,r)=>{"use strict";e.exports=i;var n=r(46080);function i(e){if(!(this instanceof i))return new i(e);n.call(this,e)}r(91285)(i,n),i.prototype._transform=function(e,t,r){r(null,e)}},79311:(e,t,r)=>{"use strict";var n,i=r(34406);e.exports=O,O.ReadableState=R,r(22699).EventEmitter;var o,a=function(e,t){return e.listeners(t).length},s=r(81696),l=r(48834).Buffer,c=(void 0!==r.g?r.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},u=r(41606);o=u&&u.debuglog?u.debuglog("stream"):function(){};var d,f,h,p=r(34250),g=r(24664),w=r(74930).getHighWaterMark,b=r(20485).q,y=b.ERR_INVALID_ARG_TYPE,m=b.ERR_STREAM_PUSH_AFTER_EOF,v=b.ERR_METHOD_NOT_IMPLEMENTED,_=b.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;r(91285)(O,s);var S=g.errorOrDestroy,E=["error","close","destroy","pause","resume"];function R(e,t,i){n=n||r(32034),e=e||{},"boolean"!=typeof i&&(i=t instanceof n),this.objectMode=!!e.objectMode,i&&(this.objectMode=this.objectMode||!!e.readableObjectMode),this.highWaterMark=w(this,e,"readableHighWaterMark",i),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.destroyed=!1,this.defaultEncoding=e.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,e.encoding&&(d||(d=r(30214).StringDecoder),this.decoder=new d(e.encoding),this.encoding=e.encoding)}function O(e){if(n=n||r(32034),!(this instanceof O))return new O(e);var t=this instanceof n;this._readableState=new R(e,this,t),this.readable=!0,e&&("function"==typeof e.read&&(this._read=e.read),"function"==typeof e.destroy&&(this._destroy=e.destroy)),s.call(this)}function k(e,t,r,n,i){o("readableAddChunk",t);var a,s=e._readableState;if(null===t)s.reading=!1,function(e,t){if(o("onEofChunk"),!t.ended){if(t.decoder){var r=t.decoder.end();r&&r.length&&(t.buffer.push(r),t.length+=t.objectMode?1:r.length)}t.ended=!0,t.sync?L(e):(t.needReadable=!1,t.emittedReadable||(t.emittedReadable=!0,I(e)))}}(e,s);else if(i||(a=function(e,t){var r,n;return n=t,l.isBuffer(n)||n instanceof c||"string"==typeof t||void 0===t||e.objectMode||(r=new y("chunk",["string","Buffer","Uint8Array"],t)),r}(s,t)),a)S(e,a);else if(s.objectMode||t&&t.length>0)if("string"==typeof t||s.objectMode||Object.getPrototypeOf(t)===l.prototype||(t=function(e){return l.from(e)}(t)),n)s.endEmitted?S(e,new _):P(e,s,t,!0);else if(s.ended)S(e,new m);else{if(s.destroyed)return!1;s.reading=!1,s.decoder&&!r?(t=s.decoder.write(t),s.objectMode||0!==t.length?P(e,s,t,!1):M(e,s)):P(e,s,t,!1)}else n||(s.reading=!1,M(e,s));return!s.ended&&(s.length<s.highWaterMark||0===s.length)}function P(e,t,r,n){t.flowing&&0===t.length&&!t.sync?(t.awaitDrain=0,e.emit("data",r)):(t.length+=t.objectMode?1:r.length,n?t.buffer.unshift(r):t.buffer.push(r),t.needReadable&&L(e)),M(e,t)}Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(e){this._readableState&&(this._readableState.destroyed=e)}}),O.prototype.destroy=g.destroy,O.prototype._undestroy=g.undestroy,O.prototype._destroy=function(e,t){t(e)},O.prototype.push=function(e,t){var r,n=this._readableState;return n.objectMode?r=!0:"string"==typeof e&&((t=t||n.defaultEncoding)!==n.encoding&&(e=l.from(e,t),t=""),r=!0),k(this,e,t,!1,r)},O.prototype.unshift=function(e){return k(this,e,null,!0,!1)},O.prototype.isPaused=function(){return!1===this._readableState.flowing},O.prototype.setEncoding=function(e){d||(d=r(30214).StringDecoder);var t=new d(e);this._readableState.decoder=t,this._readableState.encoding=this._readableState.decoder.encoding;for(var n=this._readableState.buffer.head,i="";null!==n;)i+=t.write(n.data),n=n.next;return this._readableState.buffer.clear(),""!==i&&this._readableState.buffer.push(i),this._readableState.length=i.length,this};var T=1073741824;function j(e,t){return e<=0||0===t.length&&t.ended?0:t.objectMode?1:e!=e?t.flowing&&t.length?t.buffer.head.data.length:t.length:(e>t.highWaterMark&&(t.highWaterMark=function(e){return e>=T?e=T:(e--,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e++),e}(e)),e<=t.length?e:t.ended?t.length:(t.needReadable=!0,0))}function L(e){var t=e._readableState;o("emitReadable",t.needReadable,t.emittedReadable),t.needReadable=!1,t.emittedReadable||(o("emitReadable",t.flowing),t.emittedReadable=!0,i.nextTick(I,e))}function I(e){var t=e._readableState;o("emitReadable_",t.destroyed,t.length,t.ended),t.destroyed||!t.length&&!t.ended||(e.emit("readable"),t.emittedReadable=!1),t.needReadable=!t.flowing&&!t.ended&&t.length<=t.highWaterMark,C(e)}function M(e,t){t.readingMore||(t.readingMore=!0,i.nextTick(x,e,t))}function x(e,t){for(;!t.reading&&!t.ended&&(t.length<t.highWaterMark||t.flowing&&0===t.length);){var r=t.length;if(o("maybeReadMore read 0"),e.read(0),r===t.length)break}t.readingMore=!1}function U(e){var t=e._readableState;t.readableListening=e.listenerCount("readable")>0,t.resumeScheduled&&!t.paused?t.flowing=!0:e.listenerCount("data")>0&&e.resume()}function A(e){o("readable nexttick read 0"),e.read(0)}function D(e,t){o("resume",t.reading),t.reading||e.read(0),t.resumeScheduled=!1,e.emit("resume"),C(e),t.flowing&&!t.reading&&e.read(0)}function C(e){var t=e._readableState;for(o("flow",t.flowing);t.flowing&&null!==e.read(););}function N(e,t){return 0===t.length?null:(t.objectMode?r=t.buffer.shift():!e||e>=t.length?(r=t.decoder?t.buffer.join(""):1===t.buffer.length?t.buffer.first():t.buffer.concat(t.length),t.buffer.clear()):r=t.buffer.consume(e,t.decoder),r);var r}function B(e){var t=e._readableState;o("endReadable",t.endEmitted),t.endEmitted||(t.ended=!0,i.nextTick(q,t,e))}function q(e,t){if(o("endReadableNT",e.endEmitted,e.length),!e.endEmitted&&0===e.length&&(e.endEmitted=!0,t.readable=!1,t.emit("end"),e.autoDestroy)){var r=t._writableState;(!r||r.autoDestroy&&r.finished)&&t.destroy()}}function W(e,t){for(var r=0,n=e.length;r<n;r++)if(e[r]===t)return r;return-1}O.prototype.read=function(e){o("read",e),e=parseInt(e,10);var t=this._readableState,r=e;if(0!==e&&(t.emittedReadable=!1),0===e&&t.needReadable&&((0!==t.highWaterMark?t.length>=t.highWaterMark:t.length>0)||t.ended))return o("read: emitReadable",t.length,t.ended),0===t.length&&t.ended?B(this):L(this),null;if(0===(e=j(e,t))&&t.ended)return 0===t.length&&B(this),null;var n,i=t.needReadable;return o("need readable",i),(0===t.length||t.length-e<t.highWaterMark)&&o("length less than watermark",i=!0),t.ended||t.reading?o("reading or ended",i=!1):i&&(o("do read"),t.reading=!0,t.sync=!0,0===t.length&&(t.needReadable=!0),this._read(t.highWaterMark),t.sync=!1,t.reading||(e=j(r,t))),null===(n=e>0?N(e,t):null)?(t.needReadable=t.length<=t.highWaterMark,e=0):(t.length-=e,t.awaitDrain=0),0===t.length&&(t.ended||(t.needReadable=!0),r!==e&&t.ended&&B(this)),null!==n&&this.emit("data",n),n},O.prototype._read=function(e){S(this,new v("_read()"))},O.prototype.pipe=function(e,t){var r=this,n=this._readableState;switch(n.pipesCount){case 0:n.pipes=e;break;case 1:n.pipes=[n.pipes,e];break;default:n.pipes.push(e)}n.pipesCount+=1,o("pipe count=%d opts=%j",n.pipesCount,t);var s=t&&!1===t.end||e===i.stdout||e===i.stderr?g:l;function l(){o("onend"),e.end()}n.endEmitted?i.nextTick(s):r.once("end",s),e.on("unpipe",(function t(i,a){o("onunpipe"),i===r&&a&&!1===a.hasUnpiped&&(a.hasUnpiped=!0,o("cleanup"),e.removeListener("close",h),e.removeListener("finish",p),e.removeListener("drain",c),e.removeListener("error",f),e.removeListener("unpipe",t),r.removeListener("end",l),r.removeListener("end",g),r.removeListener("data",d),u=!0,!n.awaitDrain||e._writableState&&!e._writableState.needDrain||c())}));var c=function(e){return function(){var t=e._readableState;o("pipeOnDrain",t.awaitDrain),t.awaitDrain&&t.awaitDrain--,0===t.awaitDrain&&a(e,"data")&&(t.flowing=!0,C(e))}}(r);e.on("drain",c);var u=!1;function d(t){o("ondata");var i=e.write(t);o("dest.write",i),!1===i&&((1===n.pipesCount&&n.pipes===e||n.pipesCount>1&&-1!==W(n.pipes,e))&&!u&&(o("false write response, pause",n.awaitDrain),n.awaitDrain++),r.pause())}function f(t){o("onerror",t),g(),e.removeListener("error",f),0===a(e,"error")&&S(e,t)}function h(){e.removeListener("finish",p),g()}function p(){o("onfinish"),e.removeListener("close",h),g()}function g(){o("unpipe"),r.unpipe(e)}return r.on("data",d),function(e,t,r){if("function"==typeof e.prependListener)return e.prependListener(t,r);e._events&&e._events.error?Array.isArray(e._events.error)?e._events.error.unshift(r):e._events.error=[r,e._events.error]:e.on(t,r)}(e,"error",f),e.once("close",h),e.once("finish",p),e.emit("pipe",r),n.flowing||(o("pipe resume"),r.resume()),e},O.prototype.unpipe=function(e){var t=this._readableState,r={hasUnpiped:!1};if(0===t.pipesCount)return this;if(1===t.pipesCount)return e&&e!==t.pipes||(e||(e=t.pipes),t.pipes=null,t.pipesCount=0,t.flowing=!1,e&&e.emit("unpipe",this,r)),this;if(!e){var n=t.pipes,i=t.pipesCount;t.pipes=null,t.pipesCount=0,t.flowing=!1;for(var o=0;o<i;o++)n[o].emit("unpipe",this,{hasUnpiped:!1});return this}var a=W(t.pipes,e);return-1===a||(t.pipes.splice(a,1),t.pipesCount-=1,1===t.pipesCount&&(t.pipes=t.pipes[0]),e.emit("unpipe",this,r)),this},O.prototype.on=function(e,t){var r=s.prototype.on.call(this,e,t),n=this._readableState;return"data"===e?(n.readableListening=this.listenerCount("readable")>0,!1!==n.flowing&&this.resume()):"readable"===e&&(n.endEmitted||n.readableListening||(n.readableListening=n.needReadable=!0,n.flowing=!1,n.emittedReadable=!1,o("on readable",n.length,n.reading),n.length?L(this):n.reading||i.nextTick(A,this))),r},O.prototype.addListener=O.prototype.on,O.prototype.removeListener=function(e,t){var r=s.prototype.removeListener.call(this,e,t);return"readable"===e&&i.nextTick(U,this),r},O.prototype.removeAllListeners=function(e){var t=s.prototype.removeAllListeners.apply(this,arguments);return"readable"!==e&&void 0!==e||i.nextTick(U,this),t},O.prototype.resume=function(){var e=this._readableState;return e.flowing||(o("resume"),e.flowing=!e.readableListening,function(e,t){t.resumeScheduled||(t.resumeScheduled=!0,i.nextTick(D,e,t))}(this,e)),e.paused=!1,this},O.prototype.pause=function(){return o("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(o("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},O.prototype.wrap=function(e){var t=this,r=this._readableState,n=!1;for(var i in e.on("end",(function(){if(o("wrapped end"),r.decoder&&!r.ended){var e=r.decoder.end();e&&e.length&&t.push(e)}t.push(null)})),e.on("data",(function(i){o("wrapped data"),r.decoder&&(i=r.decoder.write(i)),r.objectMode&&null==i||(r.objectMode||i&&i.length)&&(t.push(i)||(n=!0,e.pause()))})),e)void 0===this[i]&&"function"==typeof e[i]&&(this[i]=function(t){return function(){return e[t].apply(e,arguments)}}(i));for(var a=0;a<E.length;a++)e.on(E[a],this.emit.bind(this,E[a]));return this._read=function(t){o("wrapped _read",t),n&&(n=!1,e.resume())},this},"function"==typeof Symbol&&(O.prototype[Symbol.asyncIterator]=function(){return void 0===f&&(f=r(8627)),f(this)}),Object.defineProperty(O.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(O.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(O.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(e){this._readableState&&(this._readableState.flowing=e)}}),O._fromList=N,Object.defineProperty(O.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(O.from=function(e,t){return void 0===h&&(h=r(49966)),h(O,e,t)})},46080:(e,t,r)=>{"use strict";e.exports=u;var n=r(20485).q,i=n.ERR_METHOD_NOT_IMPLEMENTED,o=n.ERR_MULTIPLE_CALLBACK,a=n.ERR_TRANSFORM_ALREADY_TRANSFORMING,s=n.ERR_TRANSFORM_WITH_LENGTH_0,l=r(32034);function c(e,t){var r=this._transformState;r.transforming=!1;var n=r.writecb;if(null===n)return this.emit("error",new o);r.writechunk=null,r.writecb=null,null!=t&&this.push(t),n(e);var i=this._readableState;i.reading=!1,(i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}function u(e){if(!(this instanceof u))return new u(e);l.call(this,e),this._transformState={afterTransform:c.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,e&&("function"==typeof e.transform&&(this._transform=e.transform),"function"==typeof e.flush&&(this._flush=e.flush)),this.on("prefinish",d)}function d(){var e=this;"function"!=typeof this._flush||this._readableState.destroyed?f(this,null,null):this._flush((function(t,r){f(e,t,r)}))}function f(e,t,r){if(t)return e.emit("error",t);if(null!=r&&e.push(r),e._writableState.length)throw new s;if(e._transformState.transforming)throw new a;return e.push(null)}r(91285)(u,l),u.prototype.push=function(e,t){return this._transformState.needTransform=!1,l.prototype.push.call(this,e,t)},u.prototype._transform=function(e,t,r){r(new i("_transform()"))},u.prototype._write=function(e,t,r){var n=this._transformState;if(n.writecb=r,n.writechunk=e,n.writeencoding=t,!n.transforming){var i=this._readableState;(n.needTransform||i.needReadable||i.length<i.highWaterMark)&&this._read(i.highWaterMark)}},u.prototype._read=function(e){var t=this._transformState;null===t.writechunk||t.transforming?t.needTransform=!0:(t.transforming=!0,this._transform(t.writechunk,t.writeencoding,t.afterTransform))},u.prototype._destroy=function(e,t){l.prototype._destroy.call(this,e,(function(e){t(e)}))}},75911:(e,t,r)=>{"use strict";var n,i=r(34406);function o(e){var t=this;this.next=null,this.entry=null,this.finish=function(){!function(e,t,r){var n=e.entry;for(e.entry=null;n;){var i=n.callback;t.pendingcb--,i(undefined),n=n.next}t.corkedRequestsFree.next=e}(t,e)}}e.exports=O,O.WritableState=R;var a,s={deprecate:r(5803)},l=r(81696),c=r(48834).Buffer,u=(void 0!==r.g?r.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},d=r(24664),f=r(74930).getHighWaterMark,h=r(20485).q,p=h.ERR_INVALID_ARG_TYPE,g=h.ERR_METHOD_NOT_IMPLEMENTED,w=h.ERR_MULTIPLE_CALLBACK,b=h.ERR_STREAM_CANNOT_PIPE,y=h.ERR_STREAM_DESTROYED,m=h.ERR_STREAM_NULL_VALUES,v=h.ERR_STREAM_WRITE_AFTER_END,_=h.ERR_UNKNOWN_ENCODING,S=d.errorOrDestroy;function E(){}function R(e,t,a){n=n||r(32034),e=e||{},"boolean"!=typeof a&&(a=t instanceof n),this.objectMode=!!e.objectMode,a&&(this.objectMode=this.objectMode||!!e.writableObjectMode),this.highWaterMark=f(this,e,"writableHighWaterMark",a),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var s=!1===e.decodeStrings;this.decodeStrings=!s,this.defaultEncoding=e.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(e){!function(e,t){var r=e._writableState,n=r.sync,o=r.writecb;if("function"!=typeof o)throw new w;if(function(e){e.writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0}(r),t)!function(e,t,r,n,o){--t.pendingcb,r?(i.nextTick(o,n),i.nextTick(I,e,t),e._writableState.errorEmitted=!0,S(e,n)):(o(n),e._writableState.errorEmitted=!0,S(e,n),I(e,t))}(e,r,n,t,o);else{var a=j(r)||e.destroyed;a||r.corked||r.bufferProcessing||!r.bufferedRequest||T(e,r),n?i.nextTick(P,e,r,a,o):P(e,r,a,o)}}(t,e)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==e.emitClose,this.autoDestroy=!!e.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new o(this)}function O(e){var t=this instanceof(n=n||r(32034));if(!t&&!a.call(O,this))return new O(e);this._writableState=new R(e,this,t),this.writable=!0,e&&("function"==typeof e.write&&(this._write=e.write),"function"==typeof e.writev&&(this._writev=e.writev),"function"==typeof e.destroy&&(this._destroy=e.destroy),"function"==typeof e.final&&(this._final=e.final)),l.call(this)}function k(e,t,r,n,i,o,a){t.writelen=n,t.writecb=a,t.writing=!0,t.sync=!0,t.destroyed?t.onwrite(new y("write")):r?e._writev(i,t.onwrite):e._write(i,o,t.onwrite),t.sync=!1}function P(e,t,r,n){r||function(e,t){0===t.length&&t.needDrain&&(t.needDrain=!1,e.emit("drain"))}(e,t),t.pendingcb--,n(),I(e,t)}function T(e,t){t.bufferProcessing=!0;var r=t.bufferedRequest;if(e._writev&&r&&r.next){var n=t.bufferedRequestCount,i=new Array(n),a=t.corkedRequestsFree;a.entry=r;for(var s=0,l=!0;r;)i[s]=r,r.isBuf||(l=!1),r=r.next,s+=1;i.allBuffers=l,k(e,t,!0,t.length,i,"",a.finish),t.pendingcb++,t.lastBufferedRequest=null,a.next?(t.corkedRequestsFree=a.next,a.next=null):t.corkedRequestsFree=new o(t),t.bufferedRequestCount=0}else{for(;r;){var c=r.chunk,u=r.encoding,d=r.callback;if(k(e,t,!1,t.objectMode?1:c.length,c,u,d),r=r.next,t.bufferedRequestCount--,t.writing)break}null===r&&(t.lastBufferedRequest=null)}t.bufferedRequest=r,t.bufferProcessing=!1}function j(e){return e.ending&&0===e.length&&null===e.bufferedRequest&&!e.finished&&!e.writing}function L(e,t){e._final((function(r){t.pendingcb--,r&&S(e,r),t.prefinished=!0,e.emit("prefinish"),I(e,t)}))}function I(e,t){var r=j(t);if(r&&(function(e,t){t.prefinished||t.finalCalled||("function"!=typeof e._final||t.destroyed?(t.prefinished=!0,e.emit("prefinish")):(t.pendingcb++,t.finalCalled=!0,i.nextTick(L,e,t)))}(e,t),0===t.pendingcb&&(t.finished=!0,e.emit("finish"),t.autoDestroy))){var n=e._readableState;(!n||n.autoDestroy&&n.endEmitted)&&e.destroy()}return r}r(91285)(O,l),R.prototype.getBuffer=function(){for(var e=this.bufferedRequest,t=[];e;)t.push(e),e=e.next;return t},function(){try{Object.defineProperty(R.prototype,"buffer",{get:s.deprecate((function(){return this.getBuffer()}),"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(e){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(a=Function.prototype[Symbol.hasInstance],Object.defineProperty(O,Symbol.hasInstance,{value:function(e){return!!a.call(this,e)||this===O&&e&&e._writableState instanceof R}})):a=function(e){return e instanceof this},O.prototype.pipe=function(){S(this,new b)},O.prototype.write=function(e,t,r){var n,o=this._writableState,a=!1,s=!o.objectMode&&(n=e,c.isBuffer(n)||n instanceof u);return s&&!c.isBuffer(e)&&(e=function(e){return c.from(e)}(e)),"function"==typeof t&&(r=t,t=null),s?t="buffer":t||(t=o.defaultEncoding),"function"!=typeof r&&(r=E),o.ending?function(e,t){var r=new v;S(e,r),i.nextTick(t,r)}(this,r):(s||function(e,t,r,n){var o;return null===r?o=new m:"string"==typeof r||t.objectMode||(o=new p("chunk",["string","Buffer"],r)),!o||(S(e,o),i.nextTick(n,o),!1)}(this,o,e,r))&&(o.pendingcb++,a=function(e,t,r,n,i,o){if(!r){var a=function(e,t,r){return e.objectMode||!1===e.decodeStrings||"string"!=typeof t||(t=c.from(t,r)),t}(t,n,i);n!==a&&(r=!0,i="buffer",n=a)}var s=t.objectMode?1:n.length;t.length+=s;var l=t.length<t.highWaterMark;if(l||(t.needDrain=!0),t.writing||t.corked){var u=t.lastBufferedRequest;t.lastBufferedRequest={chunk:n,encoding:i,isBuf:r,callback:o,next:null},u?u.next=t.lastBufferedRequest:t.bufferedRequest=t.lastBufferedRequest,t.bufferedRequestCount+=1}else k(e,t,!1,s,n,i,o);return l}(this,o,s,e,t,r)),a},O.prototype.cork=function(){this._writableState.corked++},O.prototype.uncork=function(){var e=this._writableState;e.corked&&(e.corked--,e.writing||e.corked||e.bufferProcessing||!e.bufferedRequest||T(this,e))},O.prototype.setDefaultEncoding=function(e){if("string"==typeof e&&(e=e.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((e+"").toLowerCase())>-1))throw new _(e);return this._writableState.defaultEncoding=e,this},Object.defineProperty(O.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(O.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),O.prototype._write=function(e,t,r){r(new g("_write()"))},O.prototype._writev=null,O.prototype.end=function(e,t,r){var n=this._writableState;return"function"==typeof e?(r=e,e=null,t=null):"function"==typeof t&&(r=t,t=null),null!=e&&this.write(e,t),n.corked&&(n.corked=1,this.uncork()),n.ending||function(e,t,r){t.ending=!0,I(e,t),r&&(t.finished?i.nextTick(r):e.once("finish",r)),t.ended=!0,e.writable=!1}(this,n,r),this},Object.defineProperty(O.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(O.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(e){this._writableState&&(this._writableState.destroyed=e)}}),O.prototype.destroy=d.destroy,O.prototype._undestroy=d.undestroy,O.prototype._destroy=function(e,t){t(e)}},8627:(e,t,r)=>{"use strict";var n,i=r(34406);function o(e,t,r){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var a=r(63803),s=Symbol("lastResolve"),l=Symbol("lastReject"),c=Symbol("error"),u=Symbol("ended"),d=Symbol("lastPromise"),f=Symbol("handlePromise"),h=Symbol("stream");function p(e,t){return{value:e,done:t}}function g(e){var t=e[s];if(null!==t){var r=e[h].read();null!==r&&(e[d]=null,e[s]=null,e[l]=null,t(p(r,!1)))}}function w(e){i.nextTick(g,e)}var b=Object.getPrototypeOf((function(){})),y=Object.setPrototypeOf((o(n={get stream(){return this[h]},next:function(){var e=this,t=this[c];if(null!==t)return Promise.reject(t);if(this[u])return Promise.resolve(p(void 0,!0));if(this[h].destroyed)return new Promise((function(t,r){i.nextTick((function(){e[c]?r(e[c]):t(p(void 0,!0))}))}));var r,n=this[d];if(n)r=new Promise(function(e,t){return function(r,n){e.then((function(){t[u]?r(p(void 0,!0)):t[f](r,n)}),n)}}(n,this));else{var o=this[h].read();if(null!==o)return Promise.resolve(p(o,!1));r=new Promise(this[f])}return this[d]=r,r}},Symbol.asyncIterator,(function(){return this})),o(n,"return",(function(){var e=this;return new Promise((function(t,r){e[h].destroy(null,(function(e){e?r(e):t(p(void 0,!0))}))}))})),n),b);e.exports=function(e){var t,r=Object.create(y,(o(t={},h,{value:e,writable:!0}),o(t,s,{value:null,writable:!0}),o(t,l,{value:null,writable:!0}),o(t,c,{value:null,writable:!0}),o(t,u,{value:e._readableState.endEmitted,writable:!0}),o(t,f,{value:function(e,t){var n=r[h].read();n?(r[d]=null,r[s]=null,r[l]=null,e(p(n,!1))):(r[s]=e,r[l]=t)},writable:!0}),t));return r[d]=null,a(e,(function(e){if(e&&"ERR_STREAM_PREMATURE_CLOSE"!==e.code){var t=r[l];return null!==t&&(r[d]=null,r[s]=null,r[l]=null,t(e)),void(r[c]=e)}var n=r[s];null!==n&&(r[d]=null,r[s]=null,r[l]=null,n(p(void 0,!0))),r[u]=!0})),e.on("readable",w.bind(null,r)),r}},34250:(e,t,r)=>{"use strict";function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function i(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){o(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function o(e,t,r){return(t=s(t))in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function a(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,s(n.key),n)}}function s(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var r=e[Symbol.toPrimitive];if(void 0!==r){var n=r.call(e,t);if("object"!=typeof n)return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e,"string");return"symbol"==typeof t?t:String(t)}var l=r(48834).Buffer,c=r(64536).inspect,u=c&&c.custom||"inspect";e.exports=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.head=null,this.tail=null,this.length=0}var t,r;return t=e,(r=[{key:"push",value:function(e){var t={data:e,next:null};this.length>0?this.tail.next=t:this.head=t,this.tail=t,++this.length}},{key:"unshift",value:function(e){var t={data:e,next:this.head};0===this.length&&(this.tail=t),this.head=t,++this.length}},{key:"shift",value:function(){if(0!==this.length){var e=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,e}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(e){if(0===this.length)return"";for(var t=this.head,r=""+t.data;t=t.next;)r+=e+t.data;return r}},{key:"concat",value:function(e){if(0===this.length)return l.alloc(0);for(var t,r,n,i=l.allocUnsafe(e>>>0),o=this.head,a=0;o;)t=o.data,r=i,n=a,l.prototype.copy.call(t,r,n),a+=o.data.length,o=o.next;return i}},{key:"consume",value:function(e,t){var r;return e<this.head.data.length?(r=this.head.data.slice(0,e),this.head.data=this.head.data.slice(e)):r=e===this.head.data.length?this.shift():t?this._getString(e):this._getBuffer(e),r}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(e){var t=this.head,r=1,n=t.data;for(e-=n.length;t=t.next;){var i=t.data,o=e>i.length?i.length:e;if(o===i.length?n+=i:n+=i.slice(0,e),0==(e-=o)){o===i.length?(++r,t.next?this.head=t.next:this.head=this.tail=null):(this.head=t,t.data=i.slice(o));break}++r}return this.length-=r,n}},{key:"_getBuffer",value:function(e){var t=l.allocUnsafe(e),r=this.head,n=1;for(r.data.copy(t),e-=r.data.length;r=r.next;){var i=r.data,o=e>i.length?i.length:e;if(i.copy(t,t.length-e,0,o),0==(e-=o)){o===i.length?(++n,r.next?this.head=r.next:this.head=this.tail=null):(this.head=r,r.data=i.slice(o));break}++n}return this.length-=n,t}},{key:u,value:function(e,t){return c(this,i(i({},t),{},{depth:0,customInspect:!1}))}}])&&a(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}()},24664:(e,t,r)=>{"use strict";var n=r(34406);function i(e,t){a(e,t),o(e)}function o(e){e._writableState&&!e._writableState.emitClose||e._readableState&&!e._readableState.emitClose||e.emit("close")}function a(e,t){e.emit("error",t)}e.exports={destroy:function(e,t){var r=this,s=this._readableState&&this._readableState.destroyed,l=this._writableState&&this._writableState.destroyed;return s||l?(t?t(e):e&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,n.nextTick(a,this,e)):n.nextTick(a,this,e)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(e||null,(function(e){!t&&e?r._writableState?r._writableState.errorEmitted?n.nextTick(o,r):(r._writableState.errorEmitted=!0,n.nextTick(i,r,e)):n.nextTick(i,r,e):t?(n.nextTick(o,r),t(e)):n.nextTick(o,r)})),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(e,t){var r=e._readableState,n=e._writableState;r&&r.autoDestroy||n&&n.autoDestroy?e.destroy(t):e.emit("error",t)}}},63803:(e,t,r)=>{"use strict";var n=r(20485).q.ERR_STREAM_PREMATURE_CLOSE;function i(){}e.exports=function e(t,r,o){if("function"==typeof r)return e(t,null,r);r||(r={}),o=function(e){var t=!1;return function(){if(!t){t=!0;for(var r=arguments.length,n=new Array(r),i=0;i<r;i++)n[i]=arguments[i];e.apply(this,n)}}}(o||i);var a=r.readable||!1!==r.readable&&t.readable,s=r.writable||!1!==r.writable&&t.writable,l=function(){t.writable||u()},c=t._writableState&&t._writableState.finished,u=function(){s=!1,c=!0,a||o.call(t)},d=t._readableState&&t._readableState.endEmitted,f=function(){a=!1,d=!0,s||o.call(t)},h=function(e){o.call(t,e)},p=function(){var e;return a&&!d?(t._readableState&&t._readableState.ended||(e=new n),o.call(t,e)):s&&!c?(t._writableState&&t._writableState.ended||(e=new n),o.call(t,e)):void 0},g=function(){t.req.on("finish",u)};return function(e){return e.setHeader&&"function"==typeof e.abort}(t)?(t.on("complete",u),t.on("abort",p),t.req?g():t.on("request",g)):s&&!t._writableState&&(t.on("end",l),t.on("close",l)),t.on("end",f),t.on("finish",u),!1!==r.error&&t.on("error",h),t.on("close",p),function(){t.removeListener("complete",u),t.removeListener("abort",p),t.removeListener("request",g),t.req&&t.req.removeListener("finish",u),t.removeListener("end",l),t.removeListener("close",l),t.removeListener("finish",u),t.removeListener("end",f),t.removeListener("error",h),t.removeListener("close",p)}}},49966:e=>{e.exports=function(){throw new Error("Readable.from is not available in the browser")}},77253:(e,t,r)=>{"use strict";var n,i=r(20485).q,o=i.ERR_MISSING_ARGS,a=i.ERR_STREAM_DESTROYED;function s(e){if(e)throw e}function l(e,t,i,o){o=function(e){var t=!1;return function(){t||(t=!0,e.apply(void 0,arguments))}}(o);var s=!1;e.on("close",(function(){s=!0})),void 0===n&&(n=r(63803)),n(e,{readable:t,writable:i},(function(e){if(e)return o(e);s=!0,o()}));var l=!1;return function(t){if(!s&&!l)return l=!0,function(e){return e.setHeader&&"function"==typeof e.abort}(e)?e.abort():"function"==typeof e.destroy?e.destroy():void o(t||new a("pipe"))}}function c(e){e()}function u(e,t){return e.pipe(t)}function d(e){return e.length?"function"!=typeof e[e.length-1]?s:e.pop():s}e.exports=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];var n,i=d(t);if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new o("streams");var a=t.map((function(e,r){var o=r<t.length-1;return l(e,o,r>0,(function(e){n||(n=e),e&&a.forEach(c),o||(a.forEach(c),i(n))}))}));return t.reduce(u)}},74930:(e,t,r)=>{"use strict";var n=r(20485).q.ERR_INVALID_OPT_VALUE;e.exports={getHighWaterMark:function(e,t,r,i){var o=function(e,t,r){return null!=e.highWaterMark?e.highWaterMark:t?e[r]:null}(t,i,r);if(null!=o){if(!isFinite(o)||Math.floor(o)!==o||o<0)throw new n(i?r:"highWaterMark",o);return Math.floor(o)}return e.objectMode?16:16384}}},81696:(e,t,r)=>{e.exports=r(22699).EventEmitter},87416:(e,t,r)=>{(t=e.exports=r(79311)).Stream=t,t.Readable=t,t.Writable=r(75911),t.Duplex=r(32034),t.Transform=r(46080),t.PassThrough=r(57861),t.finished=r(63803),t.pipeline=r(77253)},17990:(e,t,r)=>{"use strict";r.d(t,{KO:()=>f,kb:()=>c,sX:()=>d,tH:()=>u,zc:()=>h});var n=r(95003),i=r.n(n),o=r(89487),a=r.n(o),s=r(77270),l=r.n(s);r(48834).Buffer;const c=()=>i()(32).toString("hex");URL;const u=a();function d(e){return u.decode(e)}const f=l();function h(e){return u.encode(JSON.stringify(e))}},74187:(e,t,r)=>{"use strict";r.d(t,{$e:()=>g,Gv:()=>O,ZP:()=>D,dr:()=>m,hG:()=>_,x7:()=>v});var n=r(79640),i=r.n(n),o=r(56666),a=r(11249),s=r(23460),l=r(17391),c=r(17990),u=r(3171),d=r.n(u),f=r(48834).Buffer;const h="openlogin-modal",p="openlogin_store",g={POPUP:"popup",REDIRECT:"redirect",SESSIONLESS_REDIRECT:"sessionless_redirect"},w="popup",b="redirect",y="jrpc",m={MAINNET:"mainnet",TESTNET:"testnet",CYAN:"cyan",DEVELOPMENT:"development",SK_TESTNET:"sk_testnet",CELESTE:"celeste",AQUA:"aqua"},v={SECP256K1:"secp256k1",ED25519:"ed25519"},_={GOOGLE:"google",FACEBOOK:"facebook",REDDIT:"reddit",DISCORD:"discord",TWITCH:"twitch",APPLE:"apple",LINE:"line",GITHUB:"github",KAKAO:"kakao",LINKEDIN:"linkedin",TWITTER:"twitter",WEIBO:"weibo",WECHAT:"wechat",EMAIL_PASSWORDLESS:"email_passwordless",SMS_PASSWORDLESS:"sms_passwordless",WEBAUTHN:"webauthn",JWT:"jwt"};i().setLevel("error");var S=i().getLogger("openlogin");class E{constructor(){(0,o.Z)(this,"store",{})}getItem(e){return this.store[e]||null}setItem(e,t){this.store[e]=t}}async function R(){return new Promise((e=>{"loading"!==document.readyState?e():document.addEventListener("DOMContentLoaded",(()=>{e()}))}))}function O(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];const t={},r=new URL(window.location.href);r.searchParams.forEach(((e,r)=>{"result"!==r&&(t[r]=e)}));const n=r.searchParams.get("result");if(n)try{const e=JSON.parse((0,c.sX)(n));Object.keys(e).forEach((r=>{t[r]=e[r]}))}catch(e){S.error(e)}const i=r.hash.substring(1),o=new URL(`${window.location.origin}/?${i}`);o.searchParams.forEach(((e,r)=>{"result"!==r&&(t[r]=e)}));const a=o.searchParams.get("result");if(a)try{const e=JSON.parse((0,c.sX)(a));Object.keys(e).forEach((r=>{t[r]=e[r]}))}catch(e){S.error(e)}if(e){const e=window.location.origin+window.location.pathname;window.history.replaceState(null,"",e)}return t}function k(e,t){return new Promise(((r,n)=>{if(!t)return void n(new Error("Unable to open window"));let i=!1;const o=setInterval((()=>{!i&&t.closed&&(clearInterval(o),n(new Error("user closed popup")))}),500),a=s=>{const{pid:l}=s.data;e===l&&(window.removeEventListener("message",a),i=!0,clearInterval(o),t.close(),s.data.data&&s.data.data.error?n(new Error(s.data.data.error)):r(s.data.data))};window.addEventListener("message",a)}))}function P(e){const{baseURL:t,query:r,hash:n}=e,i=new URL(t);if(r&&Object.keys(r).forEach((e=>{i.searchParams.append(e,r[e])})),n){const e=new URL(P({baseURL:t,query:n})).searchParams.toString();i.hash=e}return i.toString()}function T(e){let t,r=!1,n=0;try{t=window[e],r=!0,n=t.length;const i="__storage_test__";return t.setItem(i,i),t.removeItem(i),!0}catch(e){return e&&(22===e.code||1014===e.code||"QuotaExceededErro r"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name)&&r&&0!==n}}const j=T("sessionStorage"),L=T("localStorage");function I(){const e=void 0!==window.screenLeft?window.screenLeft:window.screenX,t=void 0!==window.screenTop?window.screenTop:window.screenY,r=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,n=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,i=Math.abs((r-1200)/2/1+e);return`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=700,width=1200,top=${Math.abs((n-700)/2/1+t)},left=${i}`}class M{constructor(e,t){(0,o.Z)(this,"storage",void 0),(0,o.Z)(this,"_storeKey",p),this.storage=e,this._storeKey=t||p;try{e.getItem(t||p)||this.resetStore()}catch(e){}}static getInstance(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"local";if(!this.instance){let r=new E;"local"===t&&L&&(r=localStorage),"session"===t&&j&&(r=sessionStorage);const n=e?`${p}_${e}`:p;this.instance=new this(r,n)}return this.instance}toJSON(){return this.storage.getItem(this._storeKey)}resetStore(){const e=this.getStore();return this.storage.setItem(this._storeKey,JSON.stringify({})),e}getStore(){return JSON.parse(this.storage.getItem(this._storeKey))}get(e){return JSON.parse(this.storage.getItem(this._storeKey))[e]}set(e,t){const r=JSON.parse(this.storage.getItem(this._storeKey));r[e]=t,this.storage.setItem(this._storeKey,JSON.stringify(r))}}(0,o.Z)(M,"instance",void 0);class x extends l.Ue{constructor(){super(...arguments),(0,o.Z)(this,"iframeElem",null),(0,o.Z)(this,"rpcStream",void 0),(0,o.Z)(this,"iframeUrl",void 0),(0,o.Z)(this,"rpcEngine",void 0),(0,o.Z)(this,"initialized",void 0),(0,o.Z)(this,"mux",void 0)}init(e){let{iframeElem:t,iframeUrl:r}=e;this.iframeElem=t,this.iframeUrl=r,this.setupStream(),this.initialized=!0}setupStream(){if(null===this.iframeElem)throw new Error("iframe is null");this.rpcStream=new l.zc({name:"embed_rpc",target:"iframe_rpc",targetWindow:this.iframeElem.contentWindow,targetOrigin:new URL(this.iframeUrl).origin}),this.mux=(0,l.V2)(this.rpcStream);const e=(0,l.AP)();d()(e.stream,this.mux.createStream("jrpc"),e.stream,(e=>{S.error("JRPC connection broken",e)}));const t=new l.eI;t.push((0,l.Rq)()),t.push(e.middleware),this.rpcEngine=t}cleanup(){this.iframeElem=null,this.initialized=!1}_rpcRequest(e,t){e.jsonrpc||(e.jsonrpc="2.0"),e.id||(e.id=(0,c.kb)()),this.rpcEngine.handle(e,t)}}function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function A(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){(0,o.Z)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}class D{constructor(e){var t,r,n,i,a,s,l,c,u,d,f,h;if((0,o.Z)(this,"provider",void 0),(0,o.Z)(this,"state",void 0),(0,o.Z)(this,"iframeElem",void 0),this.provider=new Proxy(new x,{deleteProperty:()=>!0}),e._iframeUrl||(e.network===m.MAINNET?e._iframeUrl="https://app.openlogin.com":e.network===m.CYAN?e._iframeUrl="https://cyan.openlogin.com":e.network===m.TESTNET?e._iframeUrl="https://beta.openlogin.com":e.network===m.SK_TESTNET?e._iframeUrl="https://beta-sk.openlogin.com":e.network===m.CELESTE?e._iframeUrl="https://celeste.openlogin.com":e.network===m.AQUA?e._iframeUrl="https://aqua.openlogin.com":e.network===m.DEVELOPMENT&&(e._iframeUrl="http://localhost:3000")),!e._iframeUrl)throw new Error("unspecified network and iframeUrl");!function(e){try{if("undefined"==typeof document)return;const t=document.createElement("link");t.href=e,t.crossOrigin="anonymous",t.type="text/html",t.rel="prefetch",t.relList&&t.relList.supports&&t.relList.supports("prefetch")&&document.head.appendChild(t)}catch(e){S.error(e)}}(e._iframeUrl),this.initState(A(A({},e),{},{no3PC:null!==(t=e.no3PC)&&void 0!==t&&t,_iframeUrl:e._iframeUrl,_startUrl:null!==(r=e._startUrl)&&void 0!==r?r:`${e._iframeUrl}/start`,_popupUrl:null!==(n=e._popupUrl)&&void 0!==n?n:`${e._iframeUrl}/popup-window`,redirectUrl:null!==(i=e.redirectUrl)&&void 0!==i?i:`${window.location.protocol}//${window.location.host}${window.location.pathname}`,uxMode:null!==(a=e.uxMode)&&void 0!==a?a:g.REDIRECT,replaceUrlOnRedirect:null===(s=e.replaceUrlOnRedirect)||void 0===s||s,originData:null!==(l=e.originData)&&void 0!==l?l:{[window.location.origin]:""},whiteLabel:null!==(c=e.whiteLabel)&&void 0!==c?c:{},loginConfig:null!==(u=e.loginConfig)&&void 0!==u?u:{},_storageServerUrl:null!==(d=e._storageServerUrl)&&void 0!==d?d:"https://broadcast-server.tor.us",storageKey:"session"===e.storageKey?"session":"local",_sessionNamespace:null!==(f=e._sessionNamespace)&&void 0!==f?f:"",webauthnTransports:null!==(h=e.webauthnTransports)&&void 0!==h?h:["internal"]}))}get privKey(){return this.state.privKey?this.state.privKey.padStart(64,"0"):""}get coreKitKey(){return this.state.coreKitKey?this.state.coreKitKey.padStart(64,"0"):""}initState(e){this.state={uxMode:e.uxMode,network:e.network,store:M.getInstance(e._sessionNamespace,e.storageKey),iframeUrl:e._iframeUrl,startUrl:e._startUrl,popupUrl:e._popupUrl,clientId:e.clientId,redirectUrl:e.redirectUrl,replaceUrlOnRedirect:e.replaceUrlOnRedirect,originData:e.originData,loginConfig:e.loginConfig,support3PC:!e.no3PC,whiteLabel:e.whiteLabel,storageServerUrl:e._storageServerUrl,sessionNamespace:e._sessionNamespace,webauthnTransports:e.webauthnTransports}}async init(){this.state.network===m.TESTNET&&console.log("%c WARNING! You are on testnet. Please set network: 'mainnet' in production","color: #FF0000"),this.state.uxMode===g.SESSIONLESS_REDIRECT?(await this.updateOriginData(),this.state.support3PC=!1):(await Promise.all([this._initIFrame(this.state.iframeUrl),this.updateOriginData()]),this.provider.init({iframeElem:this.iframeElem,iframeUrl:this.state.iframeUrl}));const e=O(this.state.replaceUrlOnRedirect);if(e.sessionId&&this.state.store.set("sessionId",e.sessionId),this.state.uxMode===g.SESSIONLESS_REDIRECT?this._syncState(e):this._syncState(await this._getData()),this.state.support3PC){const e=await this._check3PCSupport();this.state.support3PC=!!e.support3PC}}async updateOriginData(){const e=JSON.parse(JSON.stringify(this.state.originData));Object.keys(e).forEach((t=>{""===e[t]&&delete e[t]}));const[t,r]=await Promise.all([this.getWhitelist(),this.getWhiteLabel()]);this._syncState({originData:A(A({},t),e),whiteLabel:A(A({},r),this.state.whiteLabel)})}async getWhitelist(){try{const{clientId:e}=this.state;if(!e)throw new Error("unspecified clientId");const t=new URL("https://api.developer.tor.us/whitelist");return t.searchParams.append("project_id",this.state.clientId),t.searchParams.append("network",this.state.network),(await(0,s.U2)(t.href)).signed_urls}catch(e){return{}}}async getWhiteLabel(){try{const{clientId:e}=this.state;if(!e)throw new Error("unspecified clientId");const t=new URL("https://api.developer.tor.us/whitelabel");return t.searchParams.append("project_id",this.state.clientId),(await(0,s.U2)(t.href)).whiteLabel}catch(e){return{}}}async login(e){if(!e||!e.loginProvider)throw new Error("Please pass loginProvider in params");return this._selectedLogin(e)}async _selectedLogin(e){const t={redirectUrl:this.state.redirectUrl},r=A(A({loginProvider:e.loginProvider},t),e),n=await this.request({method:"openlogin_login",allowedInteractions:[g.REDIRECT,g.POPUP],startUrl:this.state.startUrl,popupUrl:this.state.popupUrl,params:[r]});return this.state.privKey=n.privKey,n.store?this._syncState(n):this.state.privKey&&this.state.support3PC&&this._syncState(await this._getData()),{privKey:this.privKey}}async logout(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t={};t.redirectUrl=this.state.redirectUrl,t._clientId=this.state.clientId,t.sessionId=this.state.store.get("sessionId"),e.clientId&&(t._clientId=e.clientId),void 0!==e.redirectUrl&&(t.redirectUrl=e.redirectUrl);const r=this.state.uxMode===g.SESSIONLESS_REDIRECT?[b]:[y],n=await this.request({method:"openlogin_logout",params:[t],startUrl:this.state.startUrl,popupUrl:this.state.popupUrl,allowedInteractions:r});return this._syncState({privKey:"",coreKitKey:"",walletKey:"",oAuthPrivateKey:"",tKey:"",store:{name:"",profileImage:"",dappShare:"",idToken:"",oAuthIdToken:"",oAuthAccessToken:"",sessionId:"",sessionNamespace:"",appState:"",email:""}}),n}async request(e){var t;const r=(0,c.kb)();let{params:n}=e;const i={};if(1!==n.length)throw new Error("request params array should have only one element");const{startUrl:o,popupUrl:s,method:l,allowedInteractions:u}=e;if(0===u.length)throw new Error("no allowed interactions");if(this.state.clientId&&(i._clientId=this.state.clientId),this.state.sessionNamespace&&(i._sessionNamespace=this.state.sessionNamespace),this.privKey){const e={clientId:i._clientId,timestamp:Date.now().toString()},t=await(0,a.Xx)(f.from(this.privKey,"hex"),f.from((0,c.KO)("keccak256").update(JSON.stringify(e)).digest("hex"),"hex"));i._user=(0,a.rc)(f.from(this.privKey,"hex")).toString("hex"),i._userSig=c.tH.encode(t),i._userData=e}if(i._originData=this.state.originData,i._whiteLabelData=this.state.whiteLabel,i._loginConfig=this.state.loginConfig,i._sessionId=this.state.store.get("sessionId"),i._webauthnTransports=this.state.webauthnTransports,!i._sessionId){const e=(0,c.kb)();i._sessionId=e,this.state.store.set("sessionId",e)}if(n=[A(A({},i),n[0])],u.includes(y))return this._jrpcRequest({method:l,params:n});if(n[0]._origin=new URL(null!==(t=n[0].redirectUrl)&&void 0!==t?t:this.state.redirectUrl).origin,this.state.support3PC&&(await this._setPIDData(r,n),n=[{}]),!o||!s)throw new Error("no url for redirect / popup flow");if(this.state.uxMode===g.REDIRECT||this.state.uxMode===g.SESSIONLESS_REDIRECT){if(u.includes(b))return setTimeout((()=>{window.location.href=P({baseURL:o,hash:{b64Params:(0,c.zc)(n[0]),_pid:r,_method:l}})}),50),{};if(u.includes(w)){const e=new URL(P({baseURL:s,hash:{b64Params:(0,c.zc)(n[0]),_pid:r,_method:l}})),t=window.open(e.toString(),"_blank",I());return k(r,t)}}else{if(u.includes(w)){const e=new URL(P({baseURL:s,hash:{b64Params:(0,c.zc)(n[0]),_pid:r,_method:l}})),t=window.open(e.toString(),"_blank",I());return k(r,t)}if(u.includes(b))return setTimeout((()=>{window.location.href=P({baseURL:o,hash:{b64Params:(0,c.zc)(n[0]),_pid:r,_method:l}})}),50),null}throw new Error("no matching allowed interactions")}async _initIFrame(e){await R();const t=document.getElementById(h);return t&&(t.remove(),i().info("already initialized, removing previous modal iframe")),this.iframeElem=(e=>{const t=window.document.createElement("template"),r=e.trim();return t.innerHTML=r,t.content.firstChild})(`<iframe\n        id=openlogin-modal\n        class="torusIframe"\n        src="${e}"\n        style="display: none; position: fixed; top: 0; right: 0; width: 100%;\n        height: 100%; border: none; border-radius: 0; z-index: 99999"\n      ></iframe>`),document.body.appendChild(this.iframeElem),new Promise((e=>{this.iframeElem.onload=()=>{e()}}))}async _jrpcRequest(e){if(!e||"object"!=typeof e||Array.isArray(e))throw new Error("invalid request args");const{method:t,params:r}=e;if("string"!=typeof t||0===t.length)throw new Error("invalid request method");if(void 0===r||!Array.isArray(r))throw new Error("invalid request params");return 0===r.length&&r.push({}),new Promise(((e,n)=>{this.provider._rpcRequest({method:t,params:r},(0,l.nE)(e,n))}))}async _check3PCSupport(){return this._jrpcRequest({method:"openlogin_check_3PC_support",params:[{_originData:this.state.originData}]})}async _setPIDData(e,t){await this.request({allowedInteractions:[y],method:"openlogin_set_pid_data",params:[{pid:e,data:t[0]}]})}async _getData(){return this.state.uxMode===g.SESSIONLESS_REDIRECT?{}:this.request({allowedInteractions:[y],method:"openlogin_get_data",params:[{}]})}_syncState(e){if(e.store){if("object"!=typeof e.store)throw new Error("expected store to be an object");Object.keys(e.store).forEach((t=>{this.state.store.set(t,e.store[t])}))}const{store:t}=this.state;this.state=A(A(A({},this.state),e),{},{store:t})}async encrypt(e,t){let r=t;if(r||(r=this.privKey),!/^[0-9a-fA-f]{64}$/.exec(r))throw""===r||void 0===r?new Error("private key cannot be empty"):new Error("invalid private key in encrypt");return(0,a.HI)((0,a.rc)(f.from(r,"hex")),e)}async decrypt(e,t){let r=t;if(r||(r=this.privKey),!/^[0-9a-fA-f]{64}$/.exec(r))throw""===r||void 0===r?new Error("private key cannot be empty"):new Error("invalid private key in decrypt");return(0,a.pe)(f.from(r,"hex"),e)}async getUserInfo(){if(this.privKey){const e=this.state.store.getStore();return{email:e.email||"",name:e.name||"",profileImage:e.profileImage||"",aggregateVerifier:e.aggregateVerifier||"",verifier:e.verifier||"",verifierId:e.verifierId||"",typeOfLogin:e.typeOfLogin||"",dappShare:e.dappShare||"",idToken:e.idToken||"",oAuthIdToken:e.oAuthIdToken||"",oAuthAccessToken:e.oAuthAccessToken||""}}throw new Error("user should be logged in to fetch userInfo")}async getEncodedLoginUrl(e){const{redirectUrl:t}=e,{clientId:r}=this.state;this.state.originData[origin]||await this.updateOriginData();const n=A({_clientId:r,_origin:new URL(t).origin,_originData:this.state.originData,redirectUrl:t},e),i={b64Params:(0,c.zc)(n),_method:"openlogin_login"};return P({baseURL:`${this.state.iframeUrl}/start`,hash:i})}async _cleanup(){await R();const e=document.getElementById(h);e&&(e.remove(),this.iframeElem=null),this.provider.cleanup()}}},32573:(e,t,r)=>{"use strict";var n=r(48834).Buffer,i=r(71329);function o(e,t){return void 0===t&&(t="utf8"),n.isBuffer(e)?s(e.toString("base64")):s(n.from(e,t).toString("base64"))}function a(e){return e=e.toString(),i.default(e).replace(/\-/g,"+").replace(/_/g,"/")}function s(e){return e.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}var l=o;l.encode=o,l.decode=function(e,t){return void 0===t&&(t="utf8"),n.from(a(e),"base64").toString(t)},l.toBase64=a,l.fromBase64=s,l.toBuffer=function(e){return n.from(a(e),"base64")},t.default=l},71329:(e,t,r)=>{"use strict";var n=r(48834).Buffer;Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t=e.length,r=t%4;if(!r)return e;var i=t,o=4-r,a=t+o,s=n.alloc(a);for(s.write(e);o--;)s.write("=",i++);return s.toString()}},89487:(e,t,r)=>{e.exports=r(32573).default,e.exports.default=e.exports},18797:(e,t,r)=>{var n=r(34406),i=r(29928),o=function(){},a=function(e,t,r){if("function"==typeof t)return a(e,null,t);t||(t={}),r=i(r||o);var s=e._writableState,l=e._readableState,c=t.readable||!1!==t.readable&&e.readable,u=t.writable||!1!==t.writable&&e.writable,d=!1,f=function(){e.writable||h()},h=function(){u=!1,c||r.call(e)},p=function(){c=!1,u||r.call(e)},g=function(t){r.call(e,t?new Error("exited with error code: "+t):null)},w=function(t){r.call(e,t)},b=function(){n.nextTick(y)},y=function(){if(!d)return(!c||l&&l.ended&&!l.destroyed)&&(!u||s&&s.ended&&!s.destroyed)?void 0:r.call(e,new Error("premature close"))},m=function(){e.req.on("finish",h)};return function(e){return e.setHeader&&"function"==typeof e.abort}(e)?(e.on("complete",h),e.on("abort",b),e.req?m():e.on("request",m)):u&&!s&&(e.on("end",f),e.on("close",f)),function(e){return e.stdio&&Array.isArray(e.stdio)&&3===e.stdio.length}(e)&&e.on("exit",g),e.on("end",p),e.on("finish",h),!1!==t.error&&e.on("error",w),e.on("close",b),function(){d=!0,e.removeListener("complete",h),e.removeListener("abort",b),e.removeListener("request",m),e.req&&e.req.removeListener("finish",h),e.removeListener("end",f),e.removeListener("close",f),e.removeListener("finish",h),e.removeListener("exit",g),e.removeListener("end",p),e.removeListener("error",w),e.removeListener("close",b)}};e.exports=a},51949:(e,t,r)=>{"use strict";function n(e){this.message=e}r.d(t,{Z:()=>s}),n.prototype=new Error,n.prototype.name="InvalidCharacterError";var i="undefined"!=typeof window&&window.atob&&window.atob.bind(window)||function(e){var t=String(e).replace(/=+$/,"");if(t.length%4==1)throw new n("'atob' failed: The string to be decoded is not correctly encoded.");for(var r,i,o=0,a=0,s="";i=t.charAt(a++);~i&&(r=o%4?64*r+i:i,o++%4)?s+=String.fromCharCode(255&r>>(-2*o&6)):0)i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(i);return s};function o(e){var t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw"Illegal base64url string!"}try{return function(e){return decodeURIComponent(i(e).replace(/(.)/g,(function(e,t){var r=t.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r})))}(t)}catch(e){return i(t)}}function a(e){this.message=e}a.prototype=new Error,a.prototype.name="InvalidTokenError";const s=function(e,t){if("string"!=typeof e)throw new a("Invalid token specified");var r=!0===(t=t||{}).header?0:1;try{return JSON.parse(o(e.split(".")[r]))}catch(e){throw new a("Invalid token specified: "+e.message)}}},79640:function(e,t,r){var n,i;!function(o,a){"use strict";n=function(){var e=function(){},t="undefined",r=typeof window!==t&&typeof window.navigator!==t&&/Trident\/|MSIE /.test(window.navigator.userAgent),n=["trace","debug","info","warn","error"];function i(e,t){var r=e[t];if("function"==typeof r.bind)return r.bind(e);try{return Function.prototype.bind.call(r,e)}catch(t){return function(){return Function.prototype.apply.apply(r,[e,arguments])}}}function o(){console.log&&(console.log.apply?console.log.apply(console,arguments):Function.prototype.apply.apply(console.log,[console,arguments])),console.trace&&console.trace()}function a(n){return"debug"===n&&(n="log"),typeof console!==t&&("trace"===n&&r?o:void 0!==console[n]?i(console,n):void 0!==console.log?i(console,"log"):e)}function s(t,r){for(var i=0;i<n.length;i++){var o=n[i];this[o]=i<t?e:this.methodFactory(o,t,r)}this.log=this.debug}function l(e,r,n){return function(){typeof console!==t&&(s.call(this,r,n),this[e].apply(this,arguments))}}function c(e,t,r){return a(e)||l.apply(this,arguments)}function u(e,r,i){var o,a=this;r=null==r?"WARN":r;var l="loglevel";function u(){var e;if(typeof window!==t&&l){try{e=window.localStorage[l]}catch(e){}if(typeof e===t)try{var r=window.document.cookie,n=r.indexOf(encodeURIComponent(l)+"=");-1!==n&&(e=/^([^;]+)/.exec(r.slice(n))[1])}catch(e){}return void 0===a.levels[e]&&(e=void 0),e}}"string"==typeof e?l+=":"+e:"symbol"==typeof e&&(l=void 0),a.name=e,a.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},a.methodFactory=i||c,a.getLevel=function(){return o},a.setLevel=function(r,i){if("string"==typeof r&&void 0!==a.levels[r.toUpperCase()]&&(r=a.levels[r.toUpperCase()]),!("number"==typeof r&&r>=0&&r<=a.levels.SILENT))throw"log.setLevel() called with invalid level: "+r;if(o=r,!1!==i&&function(e){var r=(n[e]||"silent").toUpperCase();if(typeof window!==t&&l){try{return void(window.localStorage[l]=r)}catch(e){}try{window.document.cookie=encodeURIComponent(l)+"="+r+";"}catch(e){}}}(r),s.call(a,r,e),typeof console===t&&r<a.levels.SILENT)return"No console available for logging"},a.setDefaultLevel=function(e){r=e,u()||a.setLevel(e,!1)},a.resetLevel=function(){a.setLevel(r,!1),function(){if(typeof window!==t&&l){try{return void window.localStorage.removeItem(l)}catch(e){}try{window.document.cookie=encodeURIComponent(l)+"=; expires=Thu, 01 Jan 1970 00:00:00 UTC"}catch(e){}}}()},a.enableAll=function(e){a.setLevel(a.levels.TRACE,e)},a.disableAll=function(e){a.setLevel(a.levels.SILENT,e)};var d=u();null==d&&(d=r),a.setLevel(d,!1)}var d=new u,f={};d.getLogger=function(e){if("symbol"!=typeof e&&"string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=f[e];return t||(t=f[e]=new u(e,d.getLevel(),d.methodFactory)),t};var h=typeof window!==t?window.log:void 0;return d.noConflict=function(){return typeof window!==t&&window.log===d&&(window.log=h),d},d.getLoggers=function(){return f},d.default=d,d},void 0===(i=n.call(t,r,t,e))||(e.exports=i)}()},29928:(e,t,r)=>{var n=r(68892);function i(e){var t=function(){return t.called?t.value:(t.called=!0,t.value=e.apply(this,arguments))};return t.called=!1,t}function o(e){var t=function(){if(t.called)throw new Error(t.onceError);return t.called=!0,t.value=e.apply(this,arguments)},r=e.name||"Function wrapped with `once`";return t.onceError=r+" shouldn't be called more than once",t.called=!1,t}e.exports=n(i),e.exports.strict=n(o),i.proto=i((function(){Object.defineProperty(Function.prototype,"once",{value:function(){return i(this)},configurable:!0}),Object.defineProperty(Function.prototype,"onceStrict",{value:function(){return o(this)},configurable:!0})}))},3171:(e,t,r)=>{var n=r(34406),i=r(29928),o=r(18797),a=r(23558),s=function(){},l=/^v?\.0/.test(n.version),c=function(e){return"function"==typeof e},u=function(e,t,r,n){n=i(n);var u=!1;e.on("close",(function(){u=!0})),o(e,{readable:t,writable:r},(function(e){if(e)return n(e);u=!0,n()}));var d=!1;return function(t){if(!u&&!d)return d=!0,function(e){return!!l&&!!a&&(e instanceof(a.ReadStream||s)||e instanceof(a.WriteStream||s))&&c(e.close)}(e)?e.close(s):function(e){return e.setHeader&&c(e.abort)}(e)?e.abort():c(e.destroy)?e.destroy():void n(t||new Error("stream was destroyed"))}},d=function(e){e()},f=function(e,t){return e.pipe(t)};e.exports=function(){var e,t=Array.prototype.slice.call(arguments),r=c(t[t.length-1]||s)&&t.pop()||s;if(Array.isArray(t[0])&&(t=t[0]),t.length<2)throw new Error("pump requires two streams per minimum");var n=t.map((function(i,o){var a=o<t.length-1;return u(i,a,o>0,(function(t){e||(e=t),t&&n.forEach(d),a||(n.forEach(d),r(e))}))}));return t.reduce(f)}},68892:e=>{e.exports=function e(t,r){if(t&&r)return e(t)(r);if("function"!=typeof t)throw new TypeError("need wrapper function");return Object.keys(t).forEach((function(e){n[e]=t[e]})),n;function n(){for(var e=new Array(arguments.length),r=0;r<e.length;r++)e[r]=arguments[r];var n=t.apply(this,e),i=e[e.length-1];return"function"==typeof n&&n!==i&&Object.keys(i).forEach((function(e){n[e]=i[e]})),n}}},56666:(e,t,r)=>{"use strict";function n(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}r.d(t,{Z:()=>n})},42501:(e,t,r)=>{"use strict";r.d(t,{s:()=>o});var n,i=(n=function(e,t){return n=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])},n(e,t)},function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function r(){this.constructor=e}n(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}),o=function(e){function t(t,r){var n,i,o,a=this.constructor,s=e.call(this,t,r)||this;return Object.defineProperty(s,"name",{value:a.name,enumerable:!1,configurable:!0}),n=s,i=a.prototype,(o=Object.setPrototypeOf)?o(n,i):n.__proto__=i,function(e,t){void 0===t&&(t=e.constructor);var r=Error.captureStackTrace;r&&r(e,t)}(s),s}return i(t,e),t}(Error)}}]);